// import axios from 'axios';
class App extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      form: '',
      id: '',
      name: '',
      email: '',
      password: '',
      line1: '',
      line2: '',
      city: '',
      state: '',
      shipzip: '',
      cc: '',
      exp: '',
      cvv: '',
      billzip: ''
    };
    this.handleSubmit = this.handleSubmit.bind(this);
    this.handleChange = this.handleChange.bind(this);
  }

  componentDidMount() {
    this.setState({
      form: 'Checkout'
    });
  }

  handleSubmit(destination, e) {
    e.preventDefault();
    this.setState({
      form: destination
    }); // creates new record

    if (e.target.id === 'checkout') {
      const data = this.state;
      delete data.form;
      delete data.id;
      axios.post('/create', data).then(res => {
        this.setState({
          id: res.data._id
        });
      }).catch(error => {
        console.error(error);
      });
    } // updates from forms


    if (e.target.id === 'form1') {
      const data = this.state;
      delete data.form;
      axios.post('/updatesForm1', data).then(res => {
        console.log(res.data);
      }).catch(error => {
        console.error(error);
      });
    }

    if (e.target.id === 'form2') {
      const data = this.state;
      delete data.form;
      axios.post('/updatesForm2', data).then(res => {
        console.log(res.data);
      }).catch(error => {
        console.error(error);
      });
    }

    if (e.target.id === 'form3') {
      const data = this.state;
      delete data.form;
      axios.post('/updatesForm3', data).then(res => {
        console.log(res.data);
      }).catch(error => {
        console.error(error);
      });
    }
  }

  handleChange(e) {
    const name = e.target.name;
    const value = e.target.value;
    this.setState({
      [name]: value
    });
    e.preventDefault();
  }

  render() {
    const destination = this.state.form;
    let form;

    if (destination === 'Checkout') {
      form = /*#__PURE__*/React.createElement(Checkout, {
        handleSubmit: this.handleSubmit,
        handleChange: this.handleChange
      });
    } else if (destination === 'Form1') {
      form = /*#__PURE__*/React.createElement(Form1, {
        handleSubmit: this.handleSubmit,
        handleChange: this.handleChange
      });
    } else if (destination === 'Form2') {
      form = /*#__PURE__*/React.createElement(Form2, {
        handleSubmit: this.handleSubmit,
        handleChange: this.handleChange
      });
    } else if (destination === 'Form3') {
      form = /*#__PURE__*/React.createElement(Form3, {
        handleSubmit: this.handleSubmit,
        handleChange: this.handleChange
      });
    } else if (destination === 'Confirmation') {
      form = /*#__PURE__*/React.createElement(Confirmation, {
        handleSubmit: this.handleSubmit,
        data: this.state
      });
    }

    return /*#__PURE__*/React.createElement("div", {
      className: "container"
    }, /*#__PURE__*/React.createElement("div", null, "Multistep Checkout"), form);
  }

}

class Checkout extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      nextForm: ''
    };
  }

  componentDidMount() {
    this.setState({
      nextForm: 'Form1'
    });
  }

  render() {
    return /*#__PURE__*/React.createElement("form", null, /*#__PURE__*/React.createElement("button", {
      className: "btn",
      id: "checkout",
      type: "button",
      onClick: e => this.props.handleSubmit(this.state.nextForm, e)
    }, "Checkout"));
  }

}

class Form1 extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      nextForm: ""
    };
  }

  componentDidMount() {
    this.setState({
      nextForm: 'Form2'
    });
  }

  render() {
    return /*#__PURE__*/React.createElement("form", null, /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("label", null, "name:"), /*#__PURE__*/React.createElement("input", {
      type: "text",
      name: "name",
      onChange: this.props.handleChange,
      required: true
    })), /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("label", null, "email:"), /*#__PURE__*/React.createElement("input", {
      type: "email",
      name: "email",
      onChange: this.props.handleChange,
      required: true
    })), /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("label", null, "password:"), /*#__PURE__*/React.createElement("input", {
      type: "password",
      name: "password",
      onChange: this.props.handleChange,
      required: true
    })), /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("button", {
      className: "btn",
      id: "form1",
      type: "button",
      onClick: e => this.props.handleSubmit(this.state.nextForm, e)
    }, "Next")));
  }

}

class Form2 extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      nextForm: ""
    };
  }

  componentDidMount() {
    this.setState({
      nextForm: 'Form3'
    });
  }

  render() {
    return /*#__PURE__*/React.createElement("form", null, /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("label", null, "line1:"), /*#__PURE__*/React.createElement("input", {
      type: "text",
      name: "line1",
      onChange: this.props.handleChange,
      required: true
    })), /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("label", null, "line2:"), /*#__PURE__*/React.createElement("input", {
      type: "text",
      name: "line2",
      onChange: this.props.handleChange,
      required: true
    })), /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("label", null, "city:"), /*#__PURE__*/React.createElement("input", {
      type: "text",
      name: "city",
      onChange: this.props.handleChange,
      required: true
    })), /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("label", null, "state:"), /*#__PURE__*/React.createElement("input", {
      type: "text",
      name: "state",
      onChange: this.props.handleChange,
      required: true
    })), /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("label", null, "zip code:"), /*#__PURE__*/React.createElement("input", {
      type: "text",
      name: "shipzip",
      onChange: this.props.handleChange,
      required: true
    })), /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("button", {
      className: "btn",
      id: "form2",
      type: "button",
      onClick: e => this.props.handleSubmit(this.state.nextForm, e)
    }, "Next")));
  }

}

class Form3 extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      nextForm: ""
    };
  }

  componentDidMount() {
    this.setState({
      nextForm: 'Confirmation'
    });
  }

  render() {
    return /*#__PURE__*/React.createElement("form", null, /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("label", null, "card #:"), /*#__PURE__*/React.createElement("input", {
      type: "text",
      name: "cc",
      onChange: this.props.handleChange,
      required: true
    })), /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("label", null, "expiry date:"), /*#__PURE__*/React.createElement("input", {
      type: "text",
      name: "exp",
      onChange: this.props.handleChange,
      required: true
    })), /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("label", null, "CVV:"), /*#__PURE__*/React.createElement("input", {
      type: "text",
      name: "cvv",
      onChange: this.props.handleChange,
      required: true
    })), /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("label", null, "zip code:"), /*#__PURE__*/React.createElement("input", {
      type: "text",
      name: "billzip",
      onChange: this.props.handleChange,
      required: true
    })), /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("button", {
      className: "btn",
      id: "form3",
      type: "button",
      onClick: e => this.props.handleSubmit(this.state.nextForm, e)
    }, "Next")));
  }

}

class Confirmation extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      nextForm: ""
    };
  }

  componentDidMount() {
    this.setState({
      nextForm: 'Checkout'
    });
    axios.get('/account').then(this.reloadGroceries).catch(error => {
      console.log(error);
    });
  }

  render() {
    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("table", null, /*#__PURE__*/React.createElement(Table, null)), /*#__PURE__*/React.createElement("form", null, /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("button", {
      className: "btn",
      id: "confirmation",
      type: "button",
      onClick: e => this.props.handleSubmit(this.state.nextForm, e)
    }, "Purchase"))));
  }

}

const Table = () => {
  return /*#__PURE__*/React.createElement("tr", null, /*#__PURE__*/React.createElement("td", null), /*#__PURE__*/React.createElement("td", null));
};

ReactDOM.render( /*#__PURE__*/React.createElement(App, null), document.getElementById('app'));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2NsaWVudC9hcHAuanN4Il0sIm5hbWVzIjpbIkFwcCIsIlJlYWN0IiwiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJwcm9wcyIsInN0YXRlIiwiZm9ybSIsImlkIiwibmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJsaW5lMSIsImxpbmUyIiwiY2l0eSIsInNoaXB6aXAiLCJjYyIsImV4cCIsImN2diIsImJpbGx6aXAiLCJoYW5kbGVTdWJtaXQiLCJiaW5kIiwiaGFuZGxlQ2hhbmdlIiwiY29tcG9uZW50RGlkTW91bnQiLCJzZXRTdGF0ZSIsImRlc3RpbmF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwidGFyZ2V0IiwiZGF0YSIsImF4aW9zIiwicG9zdCIsInRoZW4iLCJyZXMiLCJfaWQiLCJjYXRjaCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsInZhbHVlIiwicmVuZGVyIiwiQ2hlY2tvdXQiLCJuZXh0Rm9ybSIsIkZvcm0xIiwiRm9ybTIiLCJGb3JtMyIsIkNvbmZpcm1hdGlvbiIsImdldCIsInJlbG9hZEdyb2NlcmllcyIsIlRhYmxlIiwiUmVhY3RET00iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUVBLE1BQU1BLEdBQU4sU0FBa0JDLEtBQUssQ0FBQ0MsU0FBeEIsQ0FBa0M7QUFDaENDLEVBQUFBLFdBQVcsQ0FBQ0MsS0FBRCxFQUFRO0FBQ2pCLFVBQU1BLEtBQU47QUFDQSxTQUFLQyxLQUFMLEdBQWE7QUFDWEMsTUFBQUEsSUFBSSxFQUFFLEVBREs7QUFFWEMsTUFBQUEsRUFBRSxFQUFFLEVBRk87QUFHWEMsTUFBQUEsSUFBSSxFQUFFLEVBSEs7QUFJWEMsTUFBQUEsS0FBSyxFQUFFLEVBSkk7QUFLWEMsTUFBQUEsUUFBUSxFQUFFLEVBTEM7QUFNWEMsTUFBQUEsS0FBSyxFQUFFLEVBTkk7QUFPWEMsTUFBQUEsS0FBSyxFQUFFLEVBUEk7QUFRWEMsTUFBQUEsSUFBSSxFQUFFLEVBUks7QUFTWFIs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QVUsVUFBVixFQUNHZixJQURILENBQ1EsS0FBS2dCLGVBRGIsRUFFR2IsS0FGSCxDQUVVQyxLQUFELElBQVM7QUFBQ0MsTUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlGLEtBQVo7QUFBbUIsS0FGdEM7QUFHRDs7QUFLREksRUFBQUEsTUFBTSxHQUFHO0FBQ1Asd0JBQ0UsOENBQ0UsZ0RBQ0Esb0JBQUMsS0FBRCxPQURBLENBREYsZUFJRSwrQ0FDRSw4Q0FDRTtBQUNFLE1BQUEsU0FBUyxFQUFDLEtBRFo7QUFFRSxNQUFBLEVBQUUsRUFBQyxjQUZMO0FBR0UsTUFBQSxJQUFJLEVBQUMsUUFIUDtBQUlFLE1BQUEsT0FBTyxFQUFHZCxDQUFELElBQU8sS0FBS3JCLEtBQUwsQ0FBV2UsWUFBWCxDQUF3QixLQUFLZCxLQUFMLENBQVdvQyxRQUFuQyxFQUE2Q2hCLENBQTdDO0FBSmxCLGtCQURGLENBREYsQ0FKRixDQURGO0FBaUJEOztBQXBDd0M7O0FBdUMzQyxNQUFNdUIsS0FBSyxHQUFHLE1BQU07QUFDbEIsc0JBQ0UsNkNBQ0UsK0JBREYsZUFFRSwrQkFGRixDQURGO0FBTUQsQ0FQRDs7QUFVQUMsUUFBUSxDQUFDVixNQUFULGVBQWdCLG9CQUFDLEdBQUQsT0FBaEIsRUFBeUJXLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixLQUF4QixDQUF6QiIsInNvdXJjZXNDb250ZW50IjpbIi8vIGltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5cbmNsYXNzIEFwcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBmb3JtOiAnJyxcbiAgICAgIGlkOiAnJyxcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgZW1haWw6ICcnLFxuICAgICAgcGFzc3dvcmQ6ICcnLFxuICAgICAgbGluZTE6ICcnLFxuICAgICAgbGluZTI6ICcnLFxuICAgICAgY2l0eTogJycsXG4gICAgICBzdGF0ZTogJycsXG4gICAgICBzaGlwemlwOiAnJyxcbiAgICAgIGNjOiAnJyxcbiAgICAgIGV4cDogJycsXG4gICAgICBjdnY6ICcnLFxuICAgICAgYmlsbHppcDogJydcbiAgICB9O1xuXG4gICAgdGhpcy5oYW5kbGVTdWJtaXQgPSB0aGlzLmhhbmRsZVN1Ym1pdC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGFuZGxlQ2hhbmdlID0gdGhpcy5oYW5kbGVDaGFuZ2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe2Zvcm06ICdDaGVja291dCd9KVxuICB9XG5cbiAgaGFuZGxlU3VibWl0KGRlc3RpbmF0aW9uLCBlKSB7XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7Zm9ybTogZGVzdGluYXRpb259KTtcblxuICAgIC8vIGNyZWF0ZXMgbmV3IHJlY29yZFxuICAgIGlmIChlLnRhcmdldC5pZCA9PT0gJ2NoZWNrb3V0Jykge1xuICAgICAgY29uc3QgZGF0YSA9IHRoaXMuc3RhdGU7XG4gICAgICBkZWxldGUgZGF0YS5mb3JtXG4gICAgICBkZWxldGUgZGF0YS5pZDtcbiAgICAgIGF4aW9zLnBvc3QoJy9jcmVhdGUnLCBkYXRhKVxuICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aWQ6IHJlcy5kYXRhLl9pZH0pO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyB1cGRhdGVzIGZyb20gZm9ybXNcbiAgICBpZiAoZS50YXJnZXQuaWQgPT09ICdmb3JtMScpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLnN0YXRlO1xuICAgICAgZGVsZXRlIGRhdGEuZm9ybTtcbiAgICAgIGF4aW9zLnBvc3QoJy91cGRhdGVzRm9ybTEnLCBkYXRhKVxuICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKGUudGFyZ2V0LmlkID09PSAnZm9ybTInKSB7XG4gICAgICBjb25zdCBkYXRhID0gdGhpcy5zdGF0ZTtcbiAgICAgIGRlbGV0ZSBkYXRhLmZvcm07XG4gICAgICBheGlvcy5wb3N0KCcvdXBkYXRlc0Zvcm0yJywgZGF0YSlcbiAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmIChlLnRhcmdldC5pZCA9PT0gJ2Zvcm0zJykge1xuICAgICAgY29uc3QgZGF0YSA9IHRoaXMuc3RhdGU7XG4gICAgICBkZWxldGUgZGF0YS5mb3JtO1xuICAgICAgYXhpb3MucG9zdCgnL3VwZGF0ZXNGb3JtMycsIGRhdGEpXG4gICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZUNoYW5nZShlKSB7XG4gICAgY29uc3QgbmFtZSA9IGUudGFyZ2V0Lm5hbWU7XG4gICAgY29uc3QgdmFsdWUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICB0aGlzLnNldFN0YXRlKHtbbmFtZV06IHZhbHVlfSk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gdGhpcy5zdGF0ZS5mb3JtO1xuICAgIGxldCBmb3JtO1xuICAgIGlmIChkZXN0aW5hdGlvbiA9PT0gJ0NoZWNrb3V0Jykge1xuICAgICAgZm9ybSA9IDxDaGVja291dCBoYW5kbGVTdWJtaXQ9e3RoaXMuaGFuZGxlU3VibWl0fSBoYW5kbGVDaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlfS8+XG4gICAgfSBlbHNlIGlmIChkZXN0aW5hdGlvbiA9PT0gJ0Zvcm0xJykge1xuICAgICAgZm9ybSA9IDxGb3JtMSBoYW5kbGVTdWJtaXQ9e3RoaXMuaGFuZGxlU3VibWl0fSBoYW5kbGVDaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlfSAvPlxuICAgIH0gZWxzZSBpZiAoZGVzdGluYXRpb24gPT09ICdGb3JtMicpIHtcbiAgICAgIGZvcm0gPSA8Rm9ybTIgaGFuZGxlU3VibWl0PXt0aGlzLmhhbmRsZVN1Ym1pdH0gaGFuZGxlQ2hhbmdlPXt0aGlzLmhhbmRsZUNoYW5nZX0gLz5cbiAgICB9IGVsc2UgaWYgKGRlc3RpbmF0aW9uID09PSAnRm9ybTMnKSB7XG4gICAgICBmb3JtID0gPEZvcm0zIGhhbmRsZVN1Ym1pdD17dGhpcy5oYW5kbGVTdWJtaXR9IGhhbmRsZUNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2V9IC8+XG4gICAgfSBlbHNlIGlmIChkZXN0aW5hdGlvbiA9PT0gJ0NvbmZpcm1hdGlvbicpIHtcbiAgICAgIGZvcm0gPSA8Q29uZmlybWF0aW9uIGhhbmRsZVN1Ym1pdD17dGhpcy5oYW5kbGVTdWJtaXR9IGRhdGE9e3RoaXMuc3RhdGV9Lz5cbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXJcIj5cbiAgICAgICAgPGRpdj5NdWx0aXN0ZXAgQ2hlY2tvdXQ8L2Rpdj5cbiAgICAgICAge2Zvcm19XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuY2xhc3MgQ2hlY2tvdXQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge25leHRGb3JtOiAnJ307XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtuZXh0Rm9ybTogJ0Zvcm0xJ30pXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxmb3JtPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgY2xhc3NOYW1lPVwiYnRuXCJcbiAgICAgICAgICBpZD1cImNoZWNrb3V0XCJcbiAgICAgICAgICB0eXBlPSdidXR0b24nXG4gICAgICAgICAgb25DbGljaz17KGUpID0+IHRoaXMucHJvcHMuaGFuZGxlU3VibWl0KHRoaXMuc3RhdGUubmV4dEZvcm0sIGUpfVxuICAgICAgICA+Q2hlY2tvdXQ8L2J1dHRvbj5cbiAgICAgIDwvZm9ybT5cbiAgICApXG4gIH1cbn1cblxuY2xhc3MgRm9ybTEgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgbmV4dEZvcm06IFwiXCIsXG4gICAgfTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe25leHRGb3JtOiAnRm9ybTInfSlcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGZvcm0+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPGxhYmVsID5uYW1lOjwvbGFiZWw+XG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cIm5hbWVcIiBvbkNoYW5nZT17dGhpcy5wcm9wcy5oYW5kbGVDaGFuZ2V9IHJlcXVpcmVkIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxsYWJlbCA+ZW1haWw6PC9sYWJlbD5cbiAgICAgICAgICA8aW5wdXQgdHlwZT1cImVtYWlsXCIgbmFtZT1cImVtYWlsXCIgb25DaGFuZ2U9e3RoaXMucHJvcHMuaGFuZGxlQ2hhbmdlfSByZXF1aXJlZCAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8bGFiZWwgPnBhc3N3b3JkOjwvbGFiZWw+XG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJwYXNzd29yZFwiIG5hbWU9XCJwYXNzd29yZFwiIG9uQ2hhbmdlPXt0aGlzLnByb3BzLmhhbmRsZUNoYW5nZX0gcmVxdWlyZWQgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuXCJcbiAgICAgICAgICAgIGlkPVwiZm9ybTFcIlxuICAgICAgICAgICAgdHlwZT0nYnV0dG9uJ1xuICAgICAgICAgICAgb25DbGljaz17KGUpID0+IHRoaXMucHJvcHMuaGFuZGxlU3VibWl0KHRoaXMuc3RhdGUubmV4dEZvcm0sIGUpfVxuICAgICAgICAgID5OZXh0PC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9mb3JtPlxuICAgIClcbiAgfVxufVxuXG5jbGFzcyBGb3JtMiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBuZXh0Rm9ybTogXCJcIixcbiAgICB9O1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7bmV4dEZvcm06ICdGb3JtMyd9KVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8Zm9ybT5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8bGFiZWwgPmxpbmUxOjwvbGFiZWw+XG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImxpbmUxXCIgb25DaGFuZ2U9e3RoaXMucHJvcHMuaGFuZGxlQ2hhbmdlfSByZXF1aXJlZCAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8bGFiZWwgPmxpbmUyOjwvbGFiZWw+XG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImxpbmUyXCIgb25DaGFuZ2U9e3RoaXMucHJvcHMuaGFuZGxlQ2hhbmdlfSByZXF1aXJlZCAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8bGFiZWwgPmNpdHk6PC9sYWJlbD5cbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwiY2l0eVwiIG9uQ2hhbmdlPXt0aGlzLnByb3BzLmhhbmRsZUNoYW5nZX0gcmVxdWlyZWQgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPGxhYmVsID5zdGF0ZTo8L2xhYmVsPlxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJzdGF0ZVwiIG9uQ2hhbmdlPXt0aGlzLnByb3BzLmhhbmRsZUNoYW5nZX0gcmVxdWlyZWQgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPGxhYmVsID56aXAgY29kZTo8L2xhYmVsPlxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJzaGlwemlwXCIgb25DaGFuZ2U9e3RoaXMucHJvcHMuaGFuZGxlQ2hhbmdlfSByZXF1aXJlZCAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJidG5cIlxuICAgICAgICAgICAgaWQ9XCJmb3JtMlwiXG4gICAgICAgICAgICB0eXBlPSdidXR0b24nXG4gICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4gdGhpcy5wcm9wcy5oYW5kbGVTdWJtaXQodGhpcy5zdGF0ZS5uZXh0Rm9ybSwgZSl9XG4gICAgICAgICAgPk5leHQ8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Zvcm0+XG4gICAgKVxuICB9XG59XG5cbmNsYXNzIEZvcm0zIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIG5leHRGb3JtOiBcIlwiLFxuICAgIH07XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtuZXh0Rm9ybTogJ0NvbmZpcm1hdGlvbid9KVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8Zm9ybT5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8bGFiZWwgPmNhcmQgIzo8L2xhYmVsPlxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJjY1wiIG9uQ2hhbmdlPXt0aGlzLnByb3BzLmhhbmRsZUNoYW5nZX0gcmVxdWlyZWQgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPGxhYmVsID5leHBpcnkgZGF0ZTo8L2xhYmVsPlxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJleHBcIiBvbkNoYW5nZT17dGhpcy5wcm9wcy5oYW5kbGVDaGFuZ2V9IHJlcXVpcmVkIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxsYWJlbCA+Q1ZWOjwvbGFiZWw+XG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImN2dlwiIG9uQ2hhbmdlPXt0aGlzLnByb3BzLmhhbmRsZUNoYW5nZX0gcmVxdWlyZWQgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPGxhYmVsID56aXAgY29kZTo8L2xhYmVsPlxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJiaWxsemlwXCIgb25DaGFuZ2U9e3RoaXMucHJvcHMuaGFuZGxlQ2hhbmdlfSByZXF1aXJlZCAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJidG5cIlxuICAgICAgICAgICAgaWQ9XCJmb3JtM1wiXG4gICAgICAgICAgICB0eXBlPSdidXR0b24nXG4gICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4gdGhpcy5wcm9wcy5oYW5kbGVTdWJtaXQodGhpcy5zdGF0ZS5uZXh0Rm9ybSwgZSl9XG4gICAgICAgICAgPk5leHQ8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Zvcm0+XG4gICAgKVxuICB9XG59XG5cblxuXG5jbGFzcyBDb25maXJtYXRpb24gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgbmV4dEZvcm06IFwiXCIsXG4gICAgfTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe25leHRGb3JtOiAnQ2hlY2tvdXQnfSlcbiAgICBheGlvcy5nZXQoJy9hY2NvdW50JylcbiAgICAgIC50aGVuKHRoaXMucmVsb2FkR3JvY2VyaWVzKVxuICAgICAgLmNhdGNoKChlcnJvcik9Pntjb25zb2xlLmxvZyhlcnJvcil9KVxuICB9XG5cblxuXG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2PlxuICAgICAgICA8dGFibGU+XG4gICAgICAgIDxUYWJsZSAvPlxuICAgICAgICA8L3RhYmxlPlxuICAgICAgICA8Zm9ybT5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidG5cIlxuICAgICAgICAgICAgICBpZD1cImNvbmZpcm1hdGlvblwiXG4gICAgICAgICAgICAgIHR5cGU9J2J1dHRvbidcbiAgICAgICAgICAgICAgb25DbGljaz17KGUpID0+IHRoaXMucHJvcHMuaGFuZGxlU3VibWl0KHRoaXMuc3RhdGUubmV4dEZvcm0sIGUpfVxuICAgICAgICAgICAgPlB1cmNoYXNlPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZm9ybT5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuXG5jb25zdCBUYWJsZSA9ICgpID0+IHtcbiAgcmV0dXJuIChcbiAgICA8dHI+XG4gICAgICA8dGQ+PC90ZD5cbiAgICAgIDx0ZD48L3RkPlxuICAgIDwvdHI+XG4gIClcbn1cblxuXG5SZWFjdERPTS5yZW5kZXIoPEFwcCAvPiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcCcpKTsiXX0=